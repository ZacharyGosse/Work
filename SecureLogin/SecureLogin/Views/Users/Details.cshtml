
@{
  @model SecureLogin.Models.User
  
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
    WebImage photo = null;
    var newFileName = "";
    var imagePath = "";
    var imageThumbPath = "";

    if (IsPost)
    {
        photo = WebImage.GetImageFromRequest();
        if (photo != null)
        {
            newFileName = Guid.NewGuid().ToString() + "_" +
                Path.GetFileName(photo.FileName);
            imagePath = @"Content\images\" + newFileName;
            photo.Save(@"~\" + imagePath);

            imageThumbPath = @"Content\images\thumbs\" + newFileName;
            photo.Resize(width: 60, height: 60, preserveAspectRatio: true,
               preventEnlarge: true);
            photo.Save(@"~\" + imageThumbPath);
        }
    }
}

    


<div>
   <h2>Profile</h2>
</div>


<div>
    <h4>User</h4>
    <hr />

    <dl class="dl-horizontal">
        
        <dt> <br />
            @Html.DisplayNameFor(model => model.username) 
        </dt>
       
        <dd> <br />
            @Html.DisplayFor(model => model.username)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.email)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.email)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.avatar)
        </dt>

        <dd>
               
                <form action="" method="post" enctype="multipart/form-data">
                    <fieldset>
                       
                        <label for="Image">Image</label>
                        <input type="file" name="Image" />
                        <br />
                        <input type="submit" value="Submit" />
                    </fieldset>
                </form>
@if (imagePath != "")
        {
            <div class="result">
                <img src="@imageThumbPath" alt="Thumbnail image" />
                <a href="@Html.AttributeEncode(imagePath)" target="_Self">
                    View full size
                </a>
            </div>
        }
            
        </dd>
        

    </dl>
</div>

<p>
    @Html.ActionLink("Edit", "Edit", new { uname = Model.username }) |
    @Html.ActionLink("Back to List", "Index")
</p>

